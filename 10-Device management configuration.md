
# Managing the device

This chapter describes how to configure
basic device parameters and manage the device.

## Device management tasks at a glance

All device management tasks are optional. You
can perform any of the tasks in any order.

·     Configuring basic parameters

¡     [Configuring the device name](#_Ref265675331)

¡     [Configuring the system time](#_Ref360798477)

¡     [Enabling displaying the copyright statement](#_Ref470271473)

¡     [Configuring banners](#_Ref265675346)

·     Configuring security parameters

¡     [Disabling password recovery capability](#_Ref470271491)

¡     [Disabling USB interfaces](#_Ref360798591)

·     Adjusting device capacities

¡     [Setting the system operating mode](#_Ref81915442)

¡     [Setting the port status detection timer](#_Ref470271597)

·     Monitoring the device

¡     [Monitoring CPU usage](#_Ref365903758)

¡     [Setting memory alarm thresholds](#_Ref360798585)

¡     [Configuring resource monitoring](#_Ref486597707)

¡     [Setting the temperature alarm thresholds](#_Ref360798587)

¡     ‌[Configuring parity error logging for entries
on forwarding chips](#_Ref35622230)

·     Managing resources

¡     [Configuring device poweroff alarming](#_Ref496197994)

¡     [Setting serial numbers for fan trays](#_Ref35621608)

¡     [Specifying the preferred airflow direction](#_Ref360798574)

¡     [Verifying and diagnosing transceiver
modules](#_Ref360798617)

¡     [Configuring transceiver health check](#_Ref61624523)

¡     [Configuring H3C transceiver anti-counterfeit](#_Ref122443570)

·     Maintaining the device

¡     [Scheduling a task](#_Ref185080351)

¡     [Locating devices](#_Ref496198197)

¡     [Rebooting the device](#_Ref496199117)

¡     [Restoring the factory-default configuration](#_Ref496198143)

## Configuring the device name

#### About this task

A device name (also called hostname)
identifies a device in a network and is used in CLI view prompts. For example,
if the device name is Sysname, the user view prompt
is \<Sysname\>.

#### Restrictions and guidelines

On an underlay network, the device uses the
device name that you have configured for it. If you do not configure a device
name for the device but automated underlay network deployment is enabled, the
device uses the device name assigned by the VCF fabric feature. For more
information about VCF fabric, see VCF fabric configuration in Network Management and Monitoring Configuration Guide.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Configure the device name.

sysname sysname

By default, the device name is H3C.

## Configuring the system time

### About the system time

Correct system time is essential to network
management and communication. Configure the system time correctly before you
run the device on the network.

The device can use one
of the following methods to obtain the system time:

·     Uses the locally set system time, and then uses
the clock signals generated by its built-in crystal oscillator to maintain the
system time.

·     Periodically obtains the UTC time from an NTP or
PTP source, and uses the UTC time, time zone, and daylight saving time to
calculate the system time. For more information about NTP and PTP, see Network Management and Monitoring Configuration Guide.

The system time calculated by using the UTC
time from a time source is more precise.

### Restrictions and guidelines for configuring the system time

After you execute the clock protocol
none command, the clock datetime command determines the system time, whether or not the time zone or
daylight saving time has been configured.

If you configure or change the time zone or
daylight saving time after the device obtains the system time, the device
recalculates the system time. To view the system time, execute the display clock command.

### System time configuration tasks at a glance

To configure the system time, perform the
following tasks:

**1\.**Configuring the system time

Choose one of the following tasks:

¡     [Setting the system time at the CLI](#_Ref470098200)

¡     [Obtaining the UTC time through a time
protocol](#_Ref470098208)

**2\.**(Optional.) [Setting the time zone](#_Ref470098217)

Make sure each network device uses the time
zone of the place where the device resides.

**3\.**(Optional.) [Setting the daylight saving time](#_Ref470098221)

Make sure each network device uses the daylight
saving time parameters of the place where the device resides.

### Setting the system time at the CLI

**1\.**Enter system view.

system-view 

**2\.**Configure the device to use the local system
time.

clock protocol none 

By default, the device uses the NTP time
source. 

If you execute the clock protocol command multiple times, the most recent configuration takes effect.

**3\.**Return to user view.

quit 

**4\.**Set the local system time.

clock datetime time date 

By default, the system time is UTC time
00:00:00 01/01/2013. 

 

| CAUTION | CAUTION:  Change of the system time affects execution of system time-related features (such as scheduled tasks) and cooperative operation with other devices (such as log reporting and statistics collection). Before using this command, make sure you understand its impact on the live network. |
| --- | --- |

 

### Obtaining the UTC time through a time protocol

**1\.**Enter system view.

system-view 

**2\.**Specify the system time source.

clock protocol { ntp \| ptp }

By default, the device uses the NTP time
source. 

If you execute this command multiple
times, the most recent configuration takes effect.

**3\.**Configure time protocol parameters.

For more information about NTP and PTP
configuration, see Network Management and Monitoring
Configuration Guide.

### Setting the time zone

**1\.**Enter system view.

system-view 

**2\.**Set the time zone.

clock timezone zone-name { add \| minus } zone-offset 

By default, the system uses the UTC time
zone.

### Setting the daylight saving time

**1\.**Enter system view.

system-view 

**2\.**Set the daylight saving time.

clock summer-time name
start-time start-date end-time end-date add-time


By default, the daylight saving time is
not set.

## Enabling displaying the copyright statement

#### About this task

This feature enables the device to display
the copyright statement in the following situations:

·     When a Telnet or SSH user logs in.

·     When a console user quits user view. This is
because the device automatically tries to restart the user session.

If you disable displaying the copyright
statement, the device does not display the copyright statement in any
situations.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Enable displaying the copyright statement.

copyright-info enable

By default, displaying the copyright
statement is enabled.

## Configuring banners

#### About this task

Banners are messages that the system
displays when a user logs in.

The system supports the following banners:

·     Legal banner—Appears after the copyright statement. 

·     Message of the Day (MOTD)
banner—Appears after the legal banner and before
the login banner.

·     Login banner—Appears only when password or
scheme authentication is configured.

·     Shell banner—Appears when a user accesses
user view. 

The system displays the banners in the
following order: legal banner, MOTD banner, login banner, and shell banner.

#### Banner input methods

You can configure a banner by using one of
the following methods:

·     Input the entire command line in a single line.

The banner cannot contain carriage
returns. The entire command line, including the command keywords, the banner,
and the delimiters, can have a maximum of 511 characters. The delimiters for
the banner can be any printable character but must be the same. You cannot press
Enter before you input the end delimiter. 

For example, you can configure the shell
banner "Have a nice day." as follows:

\<System\> system-view

\[System] header shell %Have a
nice day.%

·     Input the command line in multiple lines.

The banner can contain carriage returns. A
carriage return is counted as two characters.

To input a banner configuration command
line in multiple lines, use one of the following methods:

¡     Press
Enter after the final command keyword, type the
banner, and end the final line with the delimiter character %. The banner plus
the delimiter can have a maximum of 1999 characters. 

For example, you can configure the banner
"Have a nice day." as follows: 

\<System\> system-view

\[System] header shell

Please input banner content,
and quit with the character '%'.

Have a nice day.%

¡     After
you type the final command keyword, type any printable character as the start
delimiter for the banner and press Enter. Then, type
the banner and end the final line with the same delimiter. The banner plus the
end delimiter can have a maximum of 1999 characters.

For example, you can configure the banner
"Have a nice day." as follows:

\<System\> system-view

\[System] header shell A

Please input banner content,
and quit with the character 'A'.

Have a nice day.A

¡     After
you type the final command keyword, type the start delimiter and part of the
banner. Make sure the final character of the final string is different from the
start delimiter. Then, press Enter, type the rest
of the banner, and end the final line with the same delimiter. The banner plus
the start and end delimiters can have a maximum of 2002 characters.

For example, you can configure the banner
"Have a nice day." as follows:

\<System\> system-view

\[System] header shell AHave a
nice day.

Please input banner content,
and quit with the character 'A'.

A

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Configure the legal banner.

header legal text

**3\.**Configure the MOTD banner.

header motd text

**4\.**Configure the login banner.

header login text

**5\.**Configure the shell banner.

header shell text

## Disablingpassword recovery capability

#### About this task

Password recovery capability controls
console user access to the device configuration and SDRAM from BootWare menus.
For more information about BootWare menus, see the release notes.

If password recovery capability is enabled,
a console user can access the device configuration without authentication to configure
a new password.

If password recovery capability is
disabled, console users must restore the factory-default configuration before they
can configure new passwords. Restoring the factory-default configuration
deletes the next-startup configuration files.

To enhance system security, disable password
recovery capability.

#### Restrictions and guidelines

To access the device configuration without
authentication, you must connect to the master device and access the BootWare
menu while the master device is starting up.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Disable password recovery capability.

undo password-recovery enable

By default, password recovery capability
is enabled.

## Disabling USB interfaces

#### About this task

You can use USB interfaces to upload or
download files. By default, all USB interfaces are enabled. You can disable USB
interfaces as needed.

#### Prerequisites

Before using this command, use the umount command to unmount all USB partitions. For more information about
this command, see Fundamentals Command Reference.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Disable USB interfaces.

usb disable

By default, all USB interfaces are
enabled.

## Setting the system operating mode

#### About this task

The device can operate in one of the
following modes:

·     0—Standard mode. 

·     1—VXLAN mode. This mode supports VXLAN, and decreases the amount of
space used for other features to save VXLAN entries. For information about
VXLAN, see VXLAN Configuration Guide.

·     3—MPLS mode. This mode supports MPLS in standalone mode. For more information,
see MPLS Configuration Guide.

·     4—MPLS-IRF mode. This mode supports MPLS in IRF mode. For more
information, see MPLS Configuration Guide.

#### Restrictions and guidelines

Change to the operating mode takes effect
after a device reboot.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the system operating mode.

switch-mode { 0 \| 1 \| 3 \| 4 }

By default, the device operates in standard
mode. 

## Setting the port status detection timer

#### About this task

The device starts a port status detection
timer when a port is shut down by a protocol. If the port has been in down
state before the timer expires, the device will set the port status to the port's
physical status. 

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the port status detection timer.

shutdown-interval time

The default setting is 30 seconds.

## Monitoring CPU usage

#### About this task

To monitor CPU usage, the device performs
the following operations:

·     Samples CPU usage at 1-minute intervals, and
compares the samples with CPU usage thresholds to identify the CPU usage status
and send alarms or notifications accordingly.

·     Samples and saves CPU usage at a configurable
interval if CPU usage tracking is enabled. You can use the display
cpu-usage history command to display the historical
CPU usage statistics in a coordinate system.

The device supports the following CPU usage
thresholds:

·     Minor threshold—If the CPU usage increases to or above the minor threshold but is less
than the severe threshold, the CPU usage enters minor alarm state. The device sends
minor alarms periodically until the CPU usage increases above the severe
threshold or the minor alarm is removed.

·     Severe threshold—If the CPU usage increases above the severe threshold, the CPU
usage enters severe alarm state. The device sends severe alarms periodically
until the severe alarm is removed.

·     Recovery threshold—If the CPU usage decreases below the recovery threshold, the CPU
usage enters recovered state. The device sends a recovery notification.

CPU usage alarms and notifications can be
sent to NETCONF, SNMP, and the information center to be encapsulated as NETCONF
events, SNMP traps and informs, and log messages. For more information, see
NETCONF, SNMP, and information center in Network
Management and Monitoring Configuration Guide.

Figure 1 CPU alarms and alarm-removed
notifications 

![](https://resource.h3c.com/en/202407/12/20240712_11704209_x_Img_x_png_1_2215962_294551_0.png)

‌

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the CPU usage alarm thresholds.

monitor cpu-usage threshold severe-threshold minor-threshold minor-threshold recovery-threshold recovery-threshold \[ slot slot-number \[ cpu cpu-number ] ]

The default settings are as follows:

¡     Severe CPU usage alarm threshold—99%.

¡     Minor CPU usage alarm threshold—80%.

¡     CPU usage recovery threshold—60%.

 

| CAUTION | CAUTION:  If you set the severe CPU usage alarm threshold to a too low value, the device will reach the threshold easily. Normal service processing will be affected. |
| --- | --- |

 

**3\.**Set CPU usage alarm resending intervals.

monitor resend cpu-usage { minor-interval
minor-interval \| severe-interval severe-interval } \* \[ slot slot-number \[ cpu cpu-number ] ]

By default, the minor alarm resending
interval is 300 seconds and the severe alarm resending interval is 60 seconds.

**4\.**Set the sampling interval for CPU usage
tracking.

monitor cpu-usage interval interval \[ slot slot-number \[ cpu cpu-number ] ]

By default, the sampling interval for CPU
usage tracking is 1 minute.

**5\.**Enable CPU usage tracking.

monitor cpu-usage enable \[ slot slot-number \[ cpu cpu-number ] ] 

By default, CPU usage tracking is
enabled.

**6\.**(Optional.) Enable periodic CPU usage
logging.

monitor cpu-usage logging interval interval-time

By default, periodic CPU usage logging is
disabled.

## Setting memory alarm thresholds

#### About this task

To ensure correct operation and improve
memory efficiency, the system monitors the amount of free memory space in real
time. If the amount of free memory space reaches the minor, severe, or critical
alarm threshold, the system issues an alarm to affected service modules and processes.

The system can also issue an early warning
to warn you of an approaching insufficient-memory condition.

The system monitors memory usage and the
amount of free low-memory space. You can use the display memory command to display memory usage information.

As shown in the following table and figure,
the system supports these free-memory thresholds:

·     Sufficient-memory threshold.

·     Early-warning threshold.

·     Normal state threshold.

·     Minor alarm threshold.

·     Severe alarm threshold.

·     Critical alarm threshold.

Table 1 Memory alarm notifications and memory alarm-removed notifications

| Notification | Triggering condition | Remarks |
| --- | --- | --- |
| Early-warning notification | The amount of free memory space decreases below the early-warning threshold. | After generating and sending an early-warning notification, the system does not generate and send any additional early-warning notifications until the early warning is removed. || Minor alarm notification | The amount of free memory space decreases below the minor alarm threshold. | After generating and sending a minor alarm notification, the system does not generate and send any additional minor alarm notifications until the minor alarm is removed. || Severe alarm notification | The amount of free memory space decreases below the severe alarm threshold. | After generating and sending a severe alarm notification, the system does not generate and send any additional severe alarm notifications until the severe alarm is removed. || Critical alarm notification | The amount of free memory space decreases below the critical alarm threshold. | After generating and sending a critical alarm notification, the system does not generate and send any additional critical alarm notifications until the critical alarm is removed. || Critical alarm-removed notification | The amount of free memory space increases above the severe alarm threshold. | N/A || Severe alarm-removed notification | The amount of free memory space increases above the minor alarm threshold. | N/A || Minor alarm-removed notification | The amount of free memory space increases above the normal state threshold. | N/A || Early-warning-removed notification | The amount of free memory space increases above the sufficient-memory threshold. | N/A |








‌

Figure 2 Memory
alarm notifications and alarm-removed notifications

![](https://resource.h3c.com/en/202407/12/20240712_11704211_x_Img_x_png_3_2215962_294551_0.png)

‌

#### Restrictions and guidelines

If a memory alarm occurs, delete unused
configuration items or disable some features to increase the free memory space.
Because the memory space is insufficient, some configuration items might not be
able to be deleted.

After you configure this feature, if the amount
of the free memory space reaches an alarm threshold, the system does not
support creating a segment or entering its view. However, an existing
microsegment will not be affected by this feature.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the memory usage threshold.

memory-threshold \[ slot slot-number \[ cpu cpu-number ] ] usage memory-threshold

By default, the memory usage threshold is
100%.

**3\.**Set the free-memory thresholds.

memory-threshold \[ slot slot-number \[ cpu cpu-number ] ] \[ ratio ] minor minor-value severe severe-value critical critical-value
normal normal-value \[ early-warning early-warning-value secure secure-value ]

The default settings are as follows:

¡     Minor alarm threshold—96 MB.

¡     Severe alarm threshold—64 MB.

¡     Critical alarm threshold—48 MB.

¡     Normal state threshold—128 MB. 

¡     Early-warning threshold—192 MB. 

¡     Sufficient-memory threshold—304 MB. 

**4\.**Set memory depletion alarm resending
intervals.

monitor resend memory-threshold { critical-interval
critical-interval \| early-warning-interval
early-warning-interval \| minor-interval minor-interval \| severe-interval
severe-interval } \* \[ slot slot-number \[ cpu cpu-number ] ]

The following are the default settings: 

¡     Early warning resending interval—1
hour.

¡     Minor alarm resending interval—12
hours.

¡     Severe alarm resending interval—3
hours.

¡     Critical alarm resending interval—1
hour.

**5\.**(Optional.) Enable periodic memory usage
logging.

monitor memory-usage logging interval interval-time

By default, periodic memory usage logging
is disabled.

## Configuring resource monitoring

#### About this task

The resource monitoring feature enables the
device to monitor the available amounts of types of resources, for example, the
space for ARP entries. The device samples the available amounts periodically
and compares the samples with resource depletion thresholds to identify the
resource depletion status.

The device supports a minor resource
depletion threshold and a severe resource depletion threshold for each
supported resource type.

·     If the available amount is equal to or less than
the minor resource depletion threshold but greater than the severe resource
depletion threshold, the resource type is in minor alarm state. 

·     If the available amount is equal to or less than
the severe resource depletion threshold, the resource type is in severe alarm
state.

·     If the available amount increases above the
minor resource depletion threshold, the resource type is in recovered state.

When a resource type enters severe alarm
state, the device issues a severe alarm. If the resource type stays in severe
alarm state, the device resends severe alarms periodically.

When a resource type enters minor alarm
state, the device issues a minor alarm. If the resource type stays in minor
alarm state or changes from severe alarm state to minor alarm state, the device
identifies whether resending of minor resource depletion alarms is enabled. If
the feature is disabled, the device does not issue additional minor alarms. If
the feature is enabled, the device resends minor alarms periodically. 

Resource depletion alarms can be sent to
NETCONF, SNMP, and the information center to be encapsulated as NETCONF events,
SNMP traps and informs, and log messages. For more information, see NETCONF,
SNMP, and information center in Network Management and
Monitoring Configuration Guide.

Figure 3 Resource depletion alarms and alarm-removed notifications

![](https://resource.h3c.com/en/202407/12/20240712_11704212_x_Img_x_png_4_2215962_294551_0.png)

‌

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set resource depletion thresholds.

resource-monitor resource resource-name slot slot-number cpu cpu-number by-percent minor-threshold
minor-threshold severe-threshold severe-threshold

The default settings vary by resource
type. Use the display resource-monitor command to display the resource depletion thresholds.

**3\.**Specify destinations for resource depletion
alarms.

resource-monitor output { netconf-event \| snmp-notification \| syslog } \*

By default, resource depletion alarms are
sent to NETCONF, SNMP, and the information center.

**4\.**Enable resending of minor resource depletion
alarms.

resource-monitor minor resend enable

By default, resending of minor resource
depletion alarms is enabled.

## Setting the temperature alarm thresholds

#### About this task

The device monitors its temperature based
on the following thresholds:

·     Low-temperature threshold.

·     High-temperature warning threshold.

·     High-temperature alarming threshold.

When the device temperature drops below the
low-temperature threshold or reaches the high-temperature warning or alarming
threshold, the device performs the following operations:

·     Sends log messages and traps.

·     Sets LEDs on the device panel.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Configure the temperature alarm thresholds.

temperature-limit slot slot-number hotspot sensor-number lowlimit warninglimit \[ alarmlimit ]

The defaults vary by temperature sensor
model. To view the defaults, execute the undo temperature-limit and display environment
commands in turn.

The high-temperature alarming threshold
must be higher than the high-temperature warning threshold, and the
high-temperature warning threshold must be higher than the low-temperature
threshold.

## Configuring parity error logging for entries on forwarding chips

#### About this task

The device automatically detects parity
errors in entries on forwarding chips. The parity error logging feature can perform
the following tasks:

·     Collects parity error statistics periodically,
and generates an alarm if the number of parity errors exceeds the logging
threshold.

·     Generates parity error logs to record parity
error information when parity errors occur.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the parity error statistics period for
entries on forwarding chips. 

parity-error monitor period value

The default parity error statistics
period is 60 seconds for entries on forwarding chips.

**3\.**Set the parity error logging threshold for
entries on forwarding chips.

parity-error monitor threshold value

The default parity error logging
threshold is 5000 for entries on forwarding chips.

**4\.**Enable parity error logging for entries on
forwarding chips.

parity-error monitor log enable

By default, parity error logging is
disabled for entries on forwarding chips. 

## Configuring device poweroff alarming

#### About this task

This feature enables the device to detect a
device poweroff event and issue a poweroff alarm by sending SNMP notifications
or log messages.

#### Restrictions and guidelines

This feature is supported only on devices
that support hot-swappable power supplies.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Specify the source interface for sending the
poweroff alarm.

dying-gasp source interface-type
{ interface-number \| interface-number.subnumber }

By default, no source interface is
specified. On an IPv4 network, the device uses the primary IPv4 address of the
output interface for the route to the destination host as the source address.
On an IPv6 network, the device selects a source IPv6 address as defined in RFC
3484\.

**3\.**Configure SNMP notification destination host settings.

dying-gasp host { ip-address \| ipv6 ipv6-address } \[ vpn-instance
vpn-instance-name ] snmp-trap version { v1 \| v2c } securityname security-string

By default, no SNMP notification destination
host settings are configured.

You can configure the device to send
poweroff alarm SNMP notifications to multiple destination hosts.

**4\.**Configure log message destination host
settings.

dying-gasp host { ip-address \| ipv6 ipv6-address } \[ vpn-instance
vpn-instance-name ] syslog

By default, no log message destination
host settings are configured.

You can configure the device to send the
poweroff alarm log messages to multiple destination hosts.

## Setting serial numbers for fan trays

#### About this task

After you set serial numbers for fan trays
correctly, the display device manuinfo
and display
device manuinfo fan commands can display serial
numbers and manufacturing dates of fan trays.

#### Hardware and feature compatibility

This feature is not supported on the
S6520X-SI, S6520-SI, S5000-EI, or MS4600 switch series.

#### Restrictions and guidelines

To set the serial number for a fan tray,
read the label on the fan tray for its serial number and enter the correct
serial number for the download manuinfo fan command.

The display device manuinfo and display device manuinfo fan commands display NONE for the serial
number and manufacturing date fields of a fan tray in the following situations:

·     The fan tray does not have a serial number
configured.

·     The configured serial number is incorrect.

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Set the serial number for a fan tray.

download manuinfo slot slot-number fan fan-id serial-num serial-number

By default, fan trays do not have serial
numbers configured. 

## Specifying the preferred airflow direction

#### About this task

Two fan tray models are available for the
device. One model has air flow from the port side to the power module side. The
other model has air flow from the power module side to the port side. 

A fan tray can operate effectively only
when it uses the same air flow direction as the ventilation system in the
equipment room. The preferred airflow direction must also be the same. 

If a fan tray is not operating correctly or
its airflow direction is different from the preferred airflow direction, the
system sends traps and logs. You must replace the fan tray.

#### Hardware and feature compatibility

This feature is not supported on the
S6520X-SI, S6520-SI, S5000-EI, or MS4600 switch series. 

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Specify the preferred airflow direction.

fan prefer-direction slot slot-number { port-to-power \| power-to-port }

By default, the preferred airflow
direction is from the port side to the power supply side. 

## Verifying and diagnosing transceiver modules

### Verifying transceiver modules

#### About this task

You can use one of the following methods to
verify the genuineness of a transceiver module: 

·     Display the key parameters of a transceiver
module, including its transceiver type, connector type, central wavelength of
the transmit laser, transfer distance, and vendor name.

·     Display its electronic label. The electronic
label is a profile of the transceiver module and contains the permanent
configuration, including the serial number, manufacturing date, and vendor
name. The data was written to the transceiver module or the device's storage
component during debugging or testing of the transceiver module or device. 

The device regularly checks transceiver
modules for their vendor names. If a transceiver module does not have a vendor
name or the vendor name is not H3C, the device repeatedly outputs traps and log
messages. For information about logging rules, see Network
Management and Monitoring Configuration Guide.

#### Procedure

To verify transceiver modules, execute the
following commands in any view:

·     Display the key parameters of transceiver
modules.

display transceiver interface \[ interface-type interface-number ]

·     Display the electrical label information of
transceiver modules.

display transceiver manuinfo interface \[ interface-type interface-number ]

### Diagnosing transceiver modules

#### About this task

The device provides the alarm and digital
diagnosis functions for transceiver modules. When a transceiver module fails or
is not operating correctly, you can perform the following tasks:

·     Check the alarms that exist on the transceiver
module to identify the fault source.

·     Examine the key parameters monitored by the
digital diagnosis function, including the temperature, voltage, laser bias
current, TX power, and RX power.

#### Procedure

To diagnose transceiver modules, execute
the following commands in any view: 

·     Display transceiver alarms.

display transceiver alarm interface \[ interface-type interface-number ]

·     Display the current values of the digital
diagnosis parameters on transceiver modules.

display transceiver diagnosis interface \[ interface-type interface-number ]

## Configuring transceiver health check

#### About this task

The transceiver health is calculated based
on the weights of five diagnosis parameters of transceiver modules, including temperature,
voltage, bias current, transmit power, and receive power.

Transceiver health check enables the device
to automatically check transceiver module status, and calculate transceiver
health and diagnosis parameter health based on the configured weights of
diagnosis parameters.

After transceiver health check is enabled
and the weights for transceiver health calculation are configured, you can use
the display
transceiver health command to view transceiver
health information. A greater health value indicates a healthier status.

#### Restrictions and guidelines

The sum of the weights of temperature,
voltage, bias current, transmit power, and receive power for transceiver health
calculation must be 100\. 

#### Procedure

**1\.**Enter system view.

system-view

**2\.**Enable transceiver health check.

transceiver health check enable

By default, transceiver health check is disabled.

**3\.**Configure the weights for transceiver health
calculation.

transceiver health weight temp temp-weight voltage volage-weight bias bias-weight rxpower rxpower-weight txpower txpower-weight

The default settings are as follows:

¡     Temperature
weight: 15\.

¡     Voltage
weight: 5\.

¡     Bias
current weight: 30\. 

¡     Receive
power weight: 10\.

¡     Transmit
power weight: 40\.

## Configuring H3C transceiver anti-counterfeit

#### About this task

This feature enables the device to check
transceiver modules after the device has been in power-on state for 15 minutes
or when a transceiver module is installed during device operation.

·     Upon detection of an H3C transceiver module, the
system outputs a log message that recommends the user to verify barcode authenticity
of the transceiver from the H3C official website www.h3c.com. Select Support \> Barcode
Anti-Counterfeiting Query from the website, and then enter the barcode
of the transceiver module. To get the transceiver module barcode, see the label
on the transceiver module or execute the display device manuinfo command.

·     The system outputs traps and log messages
periodically upon detection of a possibly counterfeited H3C transceiver module.
The device notifies you that continuing to use the detected module might cause
compatibility issues and expose the device to security threats. As a best
practice, contact H3C Support in time for further detection and verification.
For a port inserted with an H3C transceiver counterfeit, the display
transceiver diagnosis command does not display any information about it. 

#### Hardware and feature compatibility

H3C transceiver anti-counterfeit is
supported only on devices manufactured after July 1, 2022\. You can obtain the Manufacturing
date of a device in the MANUFACTURING\_DATE field
from the display device manuinfo command. 

## Scheduling a task

### About task scheduling

You can schedule the device to automatically
execute a command or a set of commands without administrative interference.

You can configure a periodic schedule or a non-periodic
schedule. A non-periodic schedule is not saved to the configuration file and is
lost when the device reboots. A periodic schedule is saved to the startup
configuration file and is automatically executed periodically.

### Restrictions and guidelines

·     The default system time is always restored at
reboot. To make sure a task schedule can be executed as expected, reconfigure
the system time or configure NTP after you reboot the device. For more
information about NTP, see Network Management and Monitoring
Configuration Guide.

·     To assign a command (command A) to a job, you
must first assign the job the command or commands for entering the view of
command A.

·     Make sure all commands in a schedule are
compliant to the command syntax. The system does not check the syntax when you
assign a command to a job.

·     A schedule cannot contain any one of these
commands: telnet, ftp, ssh2, and monitor process.

·     A schedule does not support user interaction. If
a command requires a yes or no answer, the system always assumes that a Y or Yes is entered. If a
command requires a character string input, the system assumes that either the
default character string (if any) or a null string is entered.

·     A schedule is executed in the background, and no
output (except for logs, traps, and debug information) is displayed for the
schedule.

### Procedure

**1\.**Enter system view.

system-view 

**2\.**Create a job.

scheduler job job-name 

**3\.**Assign a command to the job.

command id command 

By default, no command is assigned to a
job.

You can assign multiple commands to a
job. A command with a smaller ID is executed first.

**4\.**Exit to system view.

quit 

**5\.**Create a schedule.

scheduler schedule schedule-name 

**6\.**Assign a job to the schedule.

job job-name 

By default, no job is assigned to a
schedule.

You can assign multiple jobs to a
schedule. The jobs will be executed concurrently.

**7\.**Assign user roles to the schedule.

user-role role-name 

By default, a schedule has the user role
of the schedule creator.

You can assign a maximum of 64 user roles
to a schedule. A command in a schedule can be executed if it is permitted by
one or more user roles of the schedule.

**8\.**Specify the execution time for the schedule.

Choose one option as needed:

¡     Execute
the schedule at specific points of time.

time at time date 

time once at time \[ month-date month-day \| week-day week-day\&\<1-7\> ]

¡     Execute
the schedule after a period of time.

time once delay time 

¡     Execute
the schedule at the specified time on every specified day in a month or week.

time repeating at time \[ month-date \[ month-day \| last ] \| week-day week-day\&\<1-7\> ]

¡     Execute the schedule periodically from the specified time on.

time repeating \[ at time \[date ] ] interval interval 

By default, no execution time is
specified for a schedule.

The time commands overwrite each other. The
most recently executed command takes effect.

**9\.**(Optional.) Set the schedule log file size
limit.

scheduler logfile size value

By default, the schedule log file size
limit is 16 KB.

The schedule log file stores log messages
for execution results of commands in jobs. After the limit is reached, the
system deletes the oldest log messages to store the new log messages. If the remaining
space of the log file is not enough for a single log message, the system
truncates the message and does not store the extra part.

### Example: Scheduling a task

#### Network configuration

As shown in [Figure 4](#_Ref376162924),
two interfaces of the device are connected to users.

To save energy, configure the device to perform
the following operations:

·     Enable the interfaces at 8:00 a.m. every Monday through
Friday.

·     Disable the interfaces at 18:00 every Monday
through Friday.

Figure 4 Network diagram

![](https://resource.h3c.com/en/202407/12/20240712_11704213_x_Img_x_png_5_2215962_294551_0.png)

‌

#### Procedure

\# Enter system view.

\<Sysname\> system-view

\# Configure a job for disabling interface Ten-GigabitEthernet 1/0/1.

\[Sysname] scheduler job shutdown-Ten-GigabitEthernet1/0/1

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/1] command 1
system-view

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/1] command 2 interface
ten-gigabitethernet 1/0/1

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/1] command 3 shutdown

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/1] quit

\# Configure a job for enabling interface Ten-GigabitEthernet 1/0/1.

\[Sysname] scheduler job start-Ten-GigabitEthernet1/0/1

\[Sysname-job-start-Ten-GigabitEthernet1/0/1] command 1
system-view

\[Sysname-job-start-Ten-GigabitEthernet1/0/1] command 2 interface
ten-gigabitethernet 1/0/1

\[Sysname-job-start-Ten-GigabitEthernet1/0/1] command 3 undo shutdown

\[Sysname-job-start-Ten-GigabitEthernet1/0/1] quit

\# Configure a job for disabling interface Ten-GigabitEthernet 1/0/2.

\[Sysname] scheduler job shutdown-Ten-GigabitEthernet1/0/2

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/2] command 1
system-view

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/2] command 2 interface
ten-gigabitethernet 1/0/2

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/2] command 3 shutdown

\[Sysname-job-shutdown-Ten-GigabitEthernet1/0/2] quit

\# Configure a job for enabling interface Ten-GigabitEthernet 1/0/2.

\[Sysname] scheduler job start-Ten-GigabitEthernet1/0/2

\[Sysname-job-start-Ten-GigabitEthernet1/0/2] command 1
system-view

\[Sysname-job-start-Ten-GigabitEthernet1/0/2] command 2 interface
ten-gigabitethernet 1/0/2

\[Sysname-job-start-Ten-GigabitEthernet1/0/2] command 3 undo shutdown

\[Sysname-job-start-Ten-GigabitEthernet1/0/2] quit

\# Configure a periodic schedule for
enabling the interfaces at 8:00 a.m. every Monday through Friday.

\[Sysname] scheduler schedule
START-pc1/pc2

\[Sysname-schedule-START-pc1/pc2] job
start-Ten-GigabitEthernet1/0/1

\[Sysname-schedule-START-pc1/pc2] job
start-Ten-GigabitEthernet1/0/2

\[Sysname-schedule-START-pc1/pc2] time
repeating at 8:00 week-day mon tue wed thu fri

\[Sysname-schedule-START-pc1/pc2] quit

\# Configure a periodic schedule for disabling
the interfaces at 18:00 every Monday through Friday.

\[Sysname] scheduler schedule STOP-pc1/pc2

\[Sysname-schedule-STOP-pc1/pc2] job
shutdown-Ten-GigabitEthernet1/0/1

\[Sysname-schedule-STOP-pc1/pc2] job
shutdown-Ten-GigabitEthernet1/0/2

\[Sysname-schedule-STOP-pc1/pc2] time
repeating at 18:00 week-day mon tue wed thu fri

\[Sysname-schedule-STOP-pc1/pc2] quit

#### Verifying the configuration

\# Display the configuration information of
all jobs.

\[Sysname] display scheduler job

Job name: shutdown-Ten-GigabitEthernet1/0/1

 system-view

 interface ten-gigabitethernet 1/0/1

 shutdown

 

Job name: shutdown-Ten-GigabitEthernet1/0/2

 system-view

 interface ten-gigabitethernet 1/0/2

 shutdown

 

Job name: start-Ten-GigabitEthernet1/0/1

 system-view

 interface ten-gigabitethernet 1/0/1

 undo shutdown

 

Job name: start-Ten-GigabitEthernet1/0/2

 system-view

 interface ten-gigabitethernet 1/0/2

 undo shutdown

\# Display the schedule information.

\[Sysname] display scheduler schedule

Schedule name        : START-pc1/pc2

Schedule type        : Run on every
Mon Tue Wed Thu Fri at 08:00:00

Start time           : Wed Sep 28
08:00:00 2011

Last execution time  : Wed Sep 28
08:00:00 2011

Last completion time : Wed Sep 28
08:00:03 2011

Execution counts     : 1

\-----------------------------------------------------------------------

Job
name                                          Last execution status

start-Ten-GigabitEthernet1/0/1                                
Successful

start-Ten-GigabitEthernet1/0/2                                
Successful

 

Schedule name        : STOP-pc1/pc2

Schedule type        : Run on every
Mon Tue Wed Thu Fri at 18:00:00

Start time           : Wed Sep 28
18:00:00 2011

Last execution time  : Wed Sep 28
18:00:00 2011

Last completion time : Wed Sep 28
18:00:01 2011

Execution counts     : 1

\-----------------------------------------------------------------------

Job
name                                          Last execution status

shutdown-Ten-GigabitEthernet1/0/1                             
Successful

shutdown-Ten-GigabitEthernet1/0/2                             
Successful

\# Display schedule log information.

\[Sysname] display scheduler logfile

Job name        : start-Ten-GigabitEthernet1/0/1

Schedule name   : START-pc1/pc2

Execution time  : Wed Sep 28 08:00:00
2011

Completion time : Wed Sep 28 08:00:02
2011

\--------------------------------- Job
output \-----------------------------------

\<Sysname\>system-view

System View: return to User View with
Ctrl\+Z.

\[Sysname]interface ten-gigabitethernet 1/0/1

\[Sysname-Ten-GigabitEthernet1/0/1]undo shutdown

 

Job name        : start-Ten-GigabitEthernet1/0/2

Schedule name   : START-pc1/pc2

Execution time  : Wed Sep 28 08:00:00
2011

Completion time : Wed Sep 28 08:00:02
2011

\--------------------------------- Job
output \-----------------------------------

\<Sysname\>system-view

System View: return to User View with
Ctrl\+Z.

\[Sysname]interface ten-gigabitethernet 1/0/2

\[Sysname-Ten-GigabitEthernet1/0/2]undo shutdown

 

Job name        : shutdown-Ten-GigabitEthernet1/0/1

Schedule name   : STOP-pc1/pc2

Execution time  : Wed Sep 28 18:00:00
2011

Completion time : Wed Sep 28 18:00:01
2011

\--------------------------------- Job
output \-----------------------------------

\<Sysname\>system-view

System View: return to User View with
Ctrl\+Z.

\[Sysname]interface ten-gigabitethernet 1/0/1

\[Sysname-Ten-GigabitEthernet1/0/1]shutdown

 

Job name        : shutdown-Ten-GigabitEthernet1/0/2

Schedule name   : STOP-pc1/pc2

Execution time  : Wed Sep 28 18:00:00
2011

Completion time : Wed Sep 28 18:00:01
2011

\--------------------------------- Job
output \-----------------------------------

\<Sysname\>system-view

System View: return to User View with
Ctrl\+Z.

\[Sysname]interface ten-gigabitethernet 1/0/2

\[Sysname-Ten-GigabitEthernet1/0/2]shutdown

## Locating devices

### About device locating

The device provides LEDs for device
locating. The locator blink blink-time command flashes the LEDs quickly for a specified period of time
unless you execute the locator blink stop command.

### Starting LED flashing

To start LED flashing, execute one of the
following commands in user view:

locator \[ slot slot-number ] blink blink-time

### Stopping LED flashing

To stop LED flashing, execute one of the
following commands in user view:

locator \[ slot slot-number ] blink stop

## Rebooting the device

### About device reboot

The following device reboot methods are
available:

·     Schedule a reboot at the CLI, so the device
automatically reboots at the specified time or after the specified period of
time. 

·     Immediately reboot the device at the CLI. 

During the reboot process, the device
performs the following operations:

**a.**Resets all of its chips.

**b.**Uses the BootWare to verify the startup
software package, decompress the package, and load the images.

**c.**Initializes the system.

·     Power off and then power on the device. This
method might cause data loss, and is the least-preferred method. 

Using the CLI, you can reboot the device
from a remote host.

### Restrictions and guidelines for device reboot

For data security, the device does not reboot
while it is performing file operations.

### Rebooting the device immediately at the CLI

#### Prerequisites

Perform the following steps in any view:

**1\.**Verify that the next-startup configuration
file is correctly specified.

display startup

For more information about the display startup command, see Fundamentals Command Reference.

**2\.**Verify that the startup image files are
correctly specified.

display boot-loader

If one main startup image file is damaged
or does not exist, you must specify another main startup image file before rebooting
the device.

For more information about the display
boot-loader command, see Fundamentals
Command Reference.

**3\.**Save the running configuration to the
next-startup configuration file.

save

To avoid configuration loss, save the
running configuration before a reboot.

For more information about the save command, see Fundamentals Command Reference.

#### Procedure

To reboot the device immediately at the
CLI, execute one of the following commands in user view:

reboot \[ slot slot-number ] \[ force ]

 

| CAUTION | CAUTION:  ·     A device reboot might result in a service outage. Before using this command, make sure you understand its impact on the live network.  ·     Use the force keyword to reboot the device only when the system is faulty or fails to start up normally. A forced device reboots might cause file system damage. Before using the force keyword to reboot the device, make sure you understand its impact. |
| --- | --- |

 

### Scheduling a device reboot

#### Restrictions and guidelines

The automatic reboot configuration takes
effect on all member devices. It will be canceled if a master/subordinate
switchover occurs.

The device supports only one device reboot
schedule. If you execute the scheduler reboot command multiple times, the most recent configuration takes effect.

#### Procedure

To schedule a reboot, execute one of the
following commands in user view:

·     scheduler reboot at time \[ date ]

·     scheduler reboot delay time

By default, no device reboot time is
specified.

 

| CAUTION | CAUTION:  This task enables the device to reboot at a scheduled time, resulting in service interruption. Before using this command, make sure you understand its impact on the live network. |
| --- | --- |

 

## Restoring the factory-default configuration

#### About this task

If you want to use the device in a
different scenario or you cannot troubleshoot the device by using other
methods, use this task to restore the factory-default configuration. 

This task does not delete .bin files.

#### Restrictions and guidelines

This feature is disruptive.

#### Procedure

**1\.**Execute the following command in user view
to restore the factory-default configuration for the device:

restore factory-default

**2\.**Reboot the device.

reboot

 

| CAUTION | CAUTION:  This command restores the device to the factory default settings. Before using this command, make sure you understand its impact on the live network. |
| --- | --- |

 

When the command prompts you to choose
whether to save the running configuration, enter N. If you choose to save the running
configuration, the device loads the saved configuration at startup.

## Display and maintenance commands for device management configuration

Execute display
commands in any view. Execute the reset scheduler logfile command in user view. Execute reset version-update-record in system view.

‌

| Task | Command |
| --- | --- |
| Display the system time, date, time zone, and daylight saving time. | display clock || Display the copyright statement. | display copyright || Display CPU usage statistics. | display cpu-usage \[ control-plane \| data-plane ]  \[ summary ] \[ slot slot-number \[ cpu cpu-number \[ core { core-number \| all } ] ] ] || Display CPU usage monitoring settings. | display cpu-usage configuration \[ slot slot-number \[ cpu cpu-number ] ] || Display the historical CPU usage statistics in a coordinate system. | display cpu-usage history \[ job job-id ] \[ slot slot-number \[ cpu cpu-number ] ] || Display hardware information. | display device \[ flash \| usb ]  \[ slot slot-number \[ subslot subslot-number ] \| verbose ] || Display electronic label information for the device. | display device manuinfo \[ slot slot-number \[ subslot subslot-number ] ] || Display electronic label information for a power module. | display device manuinfo slot slot-number power power-id || Display or save operating information for features and hardware modules. | display diagnostic-information \[ hardware \| ifmgr \| infrastructure \| l2 \| l3 \| service ] \[ key-info ] \[ filename ] || Display device temperature information. | display environment \[ slot slot-number ] || Display the operating states of fan trays. | display fan \[ slot slot-number \[ fan-id ] ] || Display memory usage statistics. | display memory \[ summary ] \[ slot slot-number \[ cpu cpu-number ] ] || Display memory alarm thresholds and statistics. | display memory-threshold \[ slot slot-number \[ cpu cpu-number ] ] || Display power module information. | display power \[ slot slot-number \[ power-id ] ] || Display resource monitoring information. | display resource-monitor \[ resource resource-name ] \[ slot slot-number \[ cpu cpu-number ] ] || Display job configuration information. | display scheduler job \[ job-name ] || Display job execution log information. | display scheduler logfile || Display the automatic reboot schedule. | display scheduler reboot || Display schedule information. | display scheduler schedule \[ schedule-name ] || Display system stability and status information. | display system stable state || Display health information of transceiver modules. | display transceiver health interface \[ interface-type interface-number ] || Display system version information. | display version || Display startup software image upgrade records. | display version-update-record || Clear job execution log information. | reset scheduler logfile || Clear startup software image upgrade records. | reset version-update-record |

























‌

 

 

 

